<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Search results for flights - C2C Journeys">
    <title>Flight Search Results | Coast To Coast Journeys</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/hotel-booking.css">
    <style>
        /* Flight specific styles */
        .flight-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .flight-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
        }

        .flight-main-info {
            display: flex;
            padding: 20px;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .airline-info {
            flex: 0 0 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .airline-logo {
            height: 40px;
            object-fit: contain;
            margin-bottom: 8px;
        }

        .airline-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: #1e293b;
        }

        .flight-timing {
            flex: 1;
            display: flex;
            justify-content: space-around;
            align-items: center;
            min-width: 300px;
        }

        .time-block {
            text-align: center;
        }

        .time {
            font-size: 1.25rem;
            font-weight: 700;
            color: #0f172a;
            display: block;
        }

        .airport-code {
            font-size: 0.9rem;
            color: #64748b;
            font-weight: 500;
        }

        .flight-path {
            flex: 0 0 120px;
            text-align: center;
            position: relative;
        }

        .duration {
            font-size: 0.8rem;
            color: #64748b;
            margin-bottom: 4px;
            display: block;
        }

        .path-line {
            height: 2px;
            background: #cbd5e1;
            width: 100%;
            position: relative;
            margin: 10px 0;
        }

        .path-line::before,
        .path-line::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #94a3b8;
            top: 50%;
            transform: translateY(-50%);
        }

        .path-line::before {
            left: 0;
        }

        .path-line::after {
            right: 0;
        }

        .stops-info {
            font-size: 0.75rem;
            font-weight: 600;
            color: #ef4444;
        }

        .stops-info.direct {
            color: #10b981;
        }

        .flight-price-action {
            flex: 0 0 180px;
            padding: 20px;
            background: #f8fafc;
            border-left: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .price-label {
            font-size: 0.8rem;
            color: #64748b;
        }

        .price {
            font-size: 1.5rem;
            font-weight: 800;
            color: #2563eb;
            margin: 5px 0 15px 0;
        }

        .btn-select-flight {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            background: #2563eb;
            color: white;
            font-weight: 600;
            text-align: center;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-select-flight:hover {
            background: #1d4ed8;
        }

        .flight-meta {
            padding: 10px 20px;
            background: #f1f5f9;
            border-top: 1px dashed #cbd5e1;
            display: flex;
            gap: 20px;
            font-size: 0.8rem;
            color: #475569;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-item i {
            color: #64748b;
        }

        @media (max-width: 768px) {
            .flight-price-action {
                flex: 1 1 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0;
            }

            .flight-timing {
                min-width: 100%;
            }
        }
    </style>
</head>

<body class="hotel-results-page">
    <!-- Header -->
    <header class="header scrolled" id="header">
        <nav class="main-nav">
            <div class="container">
                <div class="nav-content">
                    <a href="index.html" class="logo">
                        <img src="../assets/images/c2c-logo.png" alt="C2C Journeys">
                        <span class="brand-name">C2C Journeys</span>
                    </a>

                    <ul class="nav-menu" id="navMenu">
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li><a href="flight-booking.html" class="nav-link active">Flights</a></li>
                        <li><a href="hotel-booking.html" class="nav-link">Hotels</a></li>
                        <li><a href="visa.html" class="nav-link">Visa</a></li>
                        <li><a href="index.html#contact" class="nav-link">Contact</a></li>
                    </ul>

                    <div class="nav-actions">
                        <div class="currency-selector" style="margin-right: 15px;">
                            <select id="currencySelect">
                                <option value="INR">ðŸ‡®ðŸ‡³ INR</option>
                                <option value="USD" selected>ðŸ‡ºðŸ‡¸ USD</option>
                                <option value="EUR">ðŸ‡ªðŸ‡º EUR</option>
                                <option value="GBP">ðŸ‡¬ðŸ‡§ GBP</option>
                                <option value="AED">ðŸ‡¦ðŸ‡ª AED</option>
                            </select>
                        </div>
                        <a href="javascript:history.back()" class="btn btn-outline" style="margin-right: 10px;">
                            <i class="fas fa-arrow-left"></i> Back
                        </a>
                        <a href="auth.html" class="btn btn-outline" id="loginBtn">
                            <i class="fas fa-user"></i> Login
                        </a>
                    </div>

                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <span></span><span></span><span></span>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="hotel-results-main">
        <!-- Search Info Section -->
        <section class="expedia-search-bar" style="background: #0f172a; color: white;">
            <div class="container">
                <div class="search-bar-container"
                    style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">
                    <div class="search-input-group">
                        <i class="fas fa-plane-departure" style="color: #60a5fa;"></i>
                        <div class="search-input-content">
                            <span class="input-label" style="color: #94a3b8;">From</span>
                            <span class="input-value" id="flightOriginDisplay" style="color: white;">Loading...</span>
                        </div>
                    </div>
                    <div class="search-divider" style="background: rgba(255,255,255,0.2);"></div>
                    <div class="search-input-group">
                        <i class="fas fa-plane-arrival" style="color: #60a5fa;"></i>
                        <div class="search-input-content">
                            <span class="input-label" style="color: #94a3b8;">To</span>
                            <span class="input-value" id="flightDestDisplay" style="color: white;">Loading...</span>
                        </div>
                    </div>
                    <div class="search-divider" style="background: rgba(255,255,255,0.2);"></div>
                    <div class="search-input-group">
                        <i class="fas fa-calendar-alt" style="color: #60a5fa;"></i>
                        <div class="search-input-content">
                            <span class="input-label" style="color: #94a3b8;">Departure</span>
                            <span class="input-value" id="flightDateDisplay" style="color: white;">Loading...</span>
                        </div>
                    </div>
                    <button class="search-btn" id="modifySearchBtn" style="background: #2563eb;">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
            <div class="container">
                <div class="results-layout">
                    <!-- Filters Sidebar -->
                    <aside class="filters-sidebar">
                        <div class="filters-card">
                            <div class="filters-header">
                                <h3><i class="fas fa-filter"></i> Filters</h3>
                                <button class="clear-filters" id="clearFilters">Reset</button>
                            </div>

                            <div class="filter-group">
                                <h4>Stops</h4>
                                <div class="filter-options">
                                    <label class="filter-checkbox">
                                        <input type="checkbox" value="0" checked>
                                        <span class="checkmark"></span>
                                        <span class="filter-label">Non-stop</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" value="1" checked>
                                        <span class="checkmark"></span>
                                        <span class="filter-label">1 Stop</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" value="2" checked>
                                        <span class="checkmark"></span>
                                        <span class="filter-label">2+ Stops</span>
                                    </label>
                                </div>
                            </div>

                            <div class="filter-group">
                                <h4>Airlines</h4>
                                <div class="filter-options" id="airlineFilters">
                                    <!-- Dynamic airlines list -->
                                    <p style="font-size: 0.85rem; color: #64748b;">Loading airlines...</p>
                                </div>
                            </div>

                            <div class="filter-group">
                                <h4>Price Range</h4>
                                <div class="price-range-slider">
                                    <input type="range" id="priceRange" min="0" max="2500" value="2500" step="50">
                                    <div class="price-labels">
                                        <span>$0</span>
                                        <span id="maxPriceLabel">$2500+</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <!-- Results Content -->
                    <div class="results-content">
                        <div class="results-header-bar">
                            <div class="results-info">
                                <span id="flightCount">0</span> flight offers found
                                <span class="badge badge-blue" style="margin-left: 10px; font-size: 0.7rem;"
                                    id="providerBadge">
                                    <i class="fas fa-bolt"></i> Live Prices
                                </span>
                            </div>
                            <div class="sort-dropdown">
                                <label>Sort by:</label>
                                <select id="sortSelect">
                                    <option value="price_low">Cheapest</option>
                                    <option value="duration_low">Fastest</option>
                                    <option value="depart_early">Earliest</option>
                                </select>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div class="loading-state" id="loadingState">
                            <div class="loading-spinner">
                                <i class="fas fa-plane fa-spin" style="color: #2563eb; font-size: 3rem;"></i>
                            </div>
                            <p style="font-weight: 600; margin-top: 15px;">Searching live flight offers from Duffel...
                            </p>
                            <p style="font-size: 0.9rem; color: #64748b;">This usually takes a few seconds.</p>
                        </div>

                        <!-- Error State -->
                        <div class="error-state hidden" id="errorState">
                            <i class="fas fa-exclamation-triangle"
                                style="font-size: 3rem; color: #ef4444; margin-bottom: 15px;"></i>
                            <h3>Search Failed</h3>
                            <p id="errorMessage">We couldn't retrieve flight offers right now.</p>
                            <button class="btn btn-primary" onclick="location.reload()">Retry Search</button>
                        </div>

                        <!-- Flights List -->
                        <div id="flightsList">
                            <!-- Flight cards will be injected here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 C2C Journeys. Powered by Duffel.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../js/supabase-client.js"></script>
    <script src="../js/flight-results.js"></script>
</body>

</html>